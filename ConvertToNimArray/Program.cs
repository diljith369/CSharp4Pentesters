using System;
using System.IO;
using System.Text;
/// <summary>
/// Programmer : Diljith Suresh
/// </summary>
namespace ConvertToNimArray
{
    class Program
    {
        static void Main(string[] args)
        {
            if(args.Length < 1)
            {
                Console.WriteLine("Please specify file path argument.");
                return;
            }
            string binpath = args[0];
            byte[] readassembly = File.ReadAllBytes(binpath);


            StringBuilder hexCodes = new StringBuilder(readassembly.Length * 2);
            foreach (byte b in readassembly)
            {
                hexCodes.AppendFormat("0x{0:x2},", b);
            }

            string nimarray = "var buf: array[" + readassembly.Length.ToString() + ", byte]" + " = [byte ";
            Console.WriteLine(nimarray + hexCodes.ToString().Substring(0, hexCodes.ToString().Length - 1) + "]");
            Console.ReadLine();
        }
    }
}
